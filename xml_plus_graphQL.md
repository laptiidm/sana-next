### **1. `IStorageSelectionService`**  
**Роль:** Сервіс для **керування вибором сховища** (БД або XML).  
**Функції:**  
- Зберігає поточний тип сховища (`CurrentStorageType`).  
- Дозволяє змінювати сховище **під час роботи додатка** (наприклад, через API-ендпоїнт).  
- **Приклад використання:**  
  ```csharp
  // У контролері:
  _storageService.CurrentStorageType = StorageType.Xml; // Переключити на XML
  ```  

---

### **2. `StorageType`**  
**Роль:** Перелік (enum) можливих **типів сховищ**.  
**Значення:**  
- `Database` — використовує базу даних.  
- `Xml` — використовує XML-файл.  
**Для чого потрібен:**  
- Уникає "магічних рядків" (наприклад, `if (type == "xml")`).  
- Забезпечує типобезпеку (компілятор перевіряє допустимі значення).  

---

### **3. `ITaskRepository`**  
**Роль:** Інтерфейс для **абстракції роботи з даними**.  
**Функції:**  
- Оголошує методи (наприклад, `GetAll()`, `Add()`, `Delete()`), які реалізують конкретні сховища (`DBTaskRepository`, `XmlTaskRepository`).  
- **Приклад:**  
  ```csharp
  public interface ITaskRepository
  {
      List<Task> GetAll();
      void Add(Task task);
      void Delete(int id);
  }
  ```  
**Чому важливо:**  
- Дозволяє **легко змінювати сховище** без змін коду, який його використовує.  
- Забезпечує **тестування** (можна підмінити реалізацію на mock).  

---

### **Як вони взаємодіють?**  
1. `IStorageSelectionService` вибирає `StorageType`.  
2. Фабрика в DI створює `ITaskRepository` (БД або XML) на основі `CurrentStorageType`.  
3. Клієнтський код (наприклад, контролер) **не знає**, яке сховище використовується — він працює тільки з `ITaskRepository`.  

**Підсумок:**  
- `IStorageSelectionService` — **контролер сховища**.  
- `StorageType` — **перелік опцій**.  
- `ITaskRepository` — **абстракція для роботи з даними**.
